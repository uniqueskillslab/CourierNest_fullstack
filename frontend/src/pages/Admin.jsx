import React, { useEffect, useState } from 'react';
import { api } from '../api';
import { PieChart, Pie, Cell, ResponsiveContainer } from 'recharts';
export default function Admin({ user }) { const [stats,setStats]=useState(null); useEffect(()=>{ if(user && user.role==='admin'){ api.adminStats().then(setStats).catch(()=>setStats(null)); }},[user]); if(!user || user.role!=='admin') return <div className='card'>Access denied</div>; if(!stats) return <div className='card small'>Loading stats...</div>; const data=[{name:'Paid',value:stats.paidCount},{name:'Unpaid',value:stats.totalJobs-stats.paidCount}]; const COLORS=['#7b2ff7','#ff6ec7']; return (<div className='card'><h3>Admin Dashboard</h3><p>Total Jobs: {stats.totalJobs}</p><p>Total Applications: {stats.totalApps}</p><div style={{width:300,height:300}}><ResponsiveContainer><PieChart><Pie data={data} dataKey='value' cx='50%' cy='50%' outerRadius={80}><Cell fill={COLORS[0]}/><Cell fill={COLORS[1]}/></Pie></PieChart></ResponsiveContainer></div></div>); }
